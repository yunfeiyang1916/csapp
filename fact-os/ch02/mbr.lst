     1                                  ;主引导程序 
     2                                  ;------------------------------------------------------------
     3                                  SECTION MBR vstart=0x7c00         
     4 00000000 8CC8                       mov ax,cs      
     5 00000002 8ED8                       mov ds,ax
     6 00000004 8EC0                       mov es,ax
     7 00000006 8ED0                       mov ss,ax
     8 00000008 8EE0                       mov fs,ax
     9 0000000A BC007C                     mov sp,0x7c00
    10                                  
    11                                  ; 清屏 利用0x06号功能，上卷全部行，则可清屏。
    12                                  ; -----------------------------------------------------------
    13                                  ;INT 0x10   功能号:0x06	   功能描述:上卷窗口
    14                                  ;------------------------------------------------------
    15                                  ;输入：
    16                                  ;AH 功能号= 0x06
    17                                  ;AL = 上卷的行数(如果为0,表示全部)
    18                                  ;BH = 上卷行属性
    19                                  ;(CL,CH) = 窗口左上角的(X,Y)位置
    20                                  ;(DL,DH) = 窗口右下角的(X,Y)位置
    21                                  ;无返回值：
    22 0000000D B80006                     mov     ax, 0x600
    23 00000010 BB0007                     mov     bx, 0x700
    24 00000013 B90000                     mov     cx, 0           ; 左上角: (0, 0)
    25 00000016 BA4F18                     mov     dx, 0x184f	   ; 右下角: (80,25),
    26                                  			   ; VGA文本模式中,一行只能容纳80个字符,共25行。
    27                                  			   ; 下标从0开始,所以0x18=24,0x4f=79
    28 00000019 CD10                       int     0x10            ; int 0x10
    29                                  
    30                                  ;;;;;;;;;    下面这三行代码是获取光标位置    ;;;;;;;;;
    31                                  ;.get_cursor获取当前光标位置,在光标位置处打印字符.
    32 0000001B B403                       mov ah, 3		; 输入: 3号子功能是获取光标位置,需要存入ah寄存器
    33 0000001D B700                       mov bh, 0		; bh寄存器存储的是待获取光标的页号
    34                                  
    35 0000001F CD10                       int 0x10		; 输出: ch=光标开始行,cl=光标结束行
    36                                  			; dh=光标所在行号,dl=光标所在列号
    37                                  
    38                                  ;;;;;;;;;    获取光标位置结束    ;;;;;;;;;;;;;;;;
    39                                  
    40                                  ;;;;;;;;;     打印字符串    ;;;;;;;;;;;
    41                                     ;还是用10h中断,不过这次是调用13号子功能打印字符串
    42 00000021 B8[3300]                   mov ax, message 
    43 00000024 89C5                       mov bp, ax		; es:bp 为串首地址, es此时同cs一致，
    44                                  			; 开头时已经为sreg初始化
    45                                  
    46                                     ; 光标位置要用到dx寄存器中内容,cx中的光标位置可忽略
    47 00000026 B90500                     mov cx, 5		; cx 为串长度,不包括结束符0的字符个数
    48 00000029 B80113                     mov ax, 0x1301	; 子功能号13是显示字符及属性,要存入ah寄存器,
    49                                  			; al设置写字符方式 ah=01: 显示字符串,光标跟随移动
    50 0000002C BB0200                     mov bx, 0x2		; bh存储要显示的页号,此处是第0页,
    51                                  			; bl中是字符属性, 属性黑底绿字(bl = 02h)
    52 0000002F CD10                       int 0x10		; 执行BIOS 0x10 号中断
    53                                  ;;;;;;;;;      打字字符串结束	 ;;;;;;;;;;;;;;;
    54                                  
    55 00000031 EBFE                       jmp $		; 使程序悬停在此
    56                                  
    57 00000033 31204D4252                 message db "1 MBR"
    58 00000038 00<rep 1C6h>               times 510-($-$$) db 0
    59 000001FE 55AA                       db 0x55,0xaa
